<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Can an LLM take care of my plants (or at least kill them slower than I do)? | 011.sh</title>
<meta name="keywords" content="">
<meta name="description" content="
     


In the Beginning
In the beginning I was bad with plants. I mean I&rsquo;m not terrible with plants -  but much like books, collecting them is a different hobby from actually doing anything with them.
I guess I sometimes buy books from the perspective of the person I want to be. &ldquo;I am a person that reads interesting books. I am a person who cares for plants&rdquo;. Thank goodness for succulents, them hardy beasts. And I&rsquo;m not too hard on myself because I am human after all. But AI will fix that, right? Norbert Wiener, cybernetics, extending our human form, making our lives easier and all that.">
<meta name="author" content="Liam Kloppers">
<link rel="canonical" href="http://localhost:1313/posts/plantmom/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.6da9a63d25a9608bca2f7f907a030e887a7dd3c3f3918e4cc113129361414bda.css" integrity="sha256-bammPSWpYIvKL3&#43;QegMOiHp908PzkY5MwRMSk2FBS9o=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/plantmom/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="http://localhost:1313/posts/plantmom/">
  <meta property="og:site_name" content="011.sh">
  <meta property="og:title" content="Can an LLM take care of my plants (or at least kill them slower than I do)?">
  <meta property="og:description" content="In the Beginning In the beginning I was bad with plants. I mean I’m not terrible with plants - but much like books, collecting them is a different hobby from actually doing anything with them.
I guess I sometimes buy books from the perspective of the person I want to be. “I am a person that reads interesting books. I am a person who cares for plants”. Thank goodness for succulents, them hardy beasts. And I’m not too hard on myself because I am human after all. But AI will fix that, right? Norbert Wiener, cybernetics, extending our human form, making our lives easier and all that.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-04-25T14:18:40+02:00">
    <meta property="article:modified_time" content="2025-04-25T14:18:40+02:00">
      <meta property="og:image" content="http://localhost:1313/images/papermod-cover.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png">
<meta name="twitter:title" content="Can an LLM take care of my plants (or at least kill them slower than I do)?">
<meta name="twitter:description" content="
     


In the Beginning
In the beginning I was bad with plants. I mean I&rsquo;m not terrible with plants -  but much like books, collecting them is a different hobby from actually doing anything with them.
I guess I sometimes buy books from the perspective of the person I want to be. &ldquo;I am a person that reads interesting books. I am a person who cares for plants&rdquo;. Thank goodness for succulents, them hardy beasts. And I&rsquo;m not too hard on myself because I am human after all. But AI will fix that, right? Norbert Wiener, cybernetics, extending our human form, making our lives easier and all that.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Can an LLM take care of my plants (or at least kill them slower than I do)?",
      "item": "http://localhost:1313/posts/plantmom/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Can an LLM take care of my plants (or at least kill them slower than I do)?",
  "name": "Can an LLM take care of my plants (or at least kill them slower than I do)?",
  "description": "\rIn the Beginning In the beginning I was bad with plants. I mean I\u0026rsquo;m not terrible with plants - but much like books, collecting them is a different hobby from actually doing anything with them.\nI guess I sometimes buy books from the perspective of the person I want to be. \u0026ldquo;I am a person that reads interesting books. I am a person who cares for plants\u0026rdquo;. Thank goodness for succulents, them hardy beasts. And I\u0026rsquo;m not too hard on myself because I am human after all. But AI will fix that, right? Norbert Wiener, cybernetics, extending our human form, making our lives easier and all that.\n",
  "keywords": [
    
  ],
  "articleBody": "\rIn the Beginning In the beginning I was bad with plants. I mean I’m not terrible with plants - but much like books, collecting them is a different hobby from actually doing anything with them.\nI guess I sometimes buy books from the perspective of the person I want to be. “I am a person that reads interesting books. I am a person who cares for plants”. Thank goodness for succulents, them hardy beasts. And I’m not too hard on myself because I am human after all. But AI will fix that, right? Norbert Wiener, cybernetics, extending our human form, making our lives easier and all that.\nLLM the Boring Stuff Large language models (and their multimodal siblings), I’d say have officially started reaching the realm of the Average Joe. I know this because my parents have been sending me Studio Ghibli edits of photos in which I can only imagine the prompt to include “turn my dog into a 1940’s Silent Movie Actress”.\nSo it stands to reason, if “normal” people are using it. It should be able to do “normal” people things. Like take care of my plants - or at least guess the most probable action to take next.\nHow not to kill a plants According to BBC’s BITESIZE (a resource for children and teachers), plants need “air, light, warmth, water, and nutrients” to be healthy. My initial brainstorming looked like this.\nAir - Air quality monitor -\u003e I tend to leave my window open. And since I work from home I breathe out enough CO₂ to keep a plant alive. Light - Light Sensor -\u003e Turn on or off the light. Warmth - thermometer -\u003e turn on a heater? Water - Soil Moisture Sensor -\u003e water Nutrients - PH sensor -\u003e prompt for plant food. I didn’t want to overcomplicate it and since I wouldn’t normally do half these things anyway I wouldn’t expect an LLM to do it. The important part would be giving it sensor values that would reflect environmental factors that I can normally judge using my senses.\nThis would mainly lead to two questions: Is the plant getting enough water and is the plant getting enough light?\nI settled on tracking light, soil moisture and temperature (just as an extra variable). With actionable tasks being relay control of a grow light and a water pump.\nSensor Stack Since I have SHD (sensor hoarding disorder), I managed to scavenge together the relay (4-channel), moisture sensor and photodiode (generic MH Series ADC Readers), and multipurpose BME280 sensor (which measures temperature, humidity and atmospheric pressure) from my cupboard.\nI made sure all the sensors worked* using an Arduino Uno clone. I’ve dealt with the ESP32 in-depth previously so I went ahead and ordered a Wemos D1 R32 - an ESP32 dev board with an Uno formfactor. This would give me the best of both words - built in WiFi, dual-core processing if needed and I wouldn’t bend the pins sticking it into a breadboard where only half the pins would be accessible anyway (Appendix A). I also ordered a pump and a grow light.\n*see the pain tax at the end of this write-up.\nI’d send these readings and control commands via MQTT to a central server (my headless Raspberry Pi 3B+). Without mentioning everything, my grand vision of the stack was thus:\nLLM the Boring Stuff (with Python) … and everything else mentioned above. At the time of writing, Model Context Protocol is one of the hype trains in the AI space - as a standardisation for how LLM’s should interact with external systems. It sounds like it could work for my use-case. I thought that would be overkill so I:\nDecided I wouldn’t do that at all. I would just use a basic function calling solution. I wouldn’t be self-hosting it either. It might sound cocky but I do believe I’m more competent than a 7b model or anything my GPU can run without making me fear that a fire is about to start. Philipp Schmid at Google’s article Google Gemma 3 Function Calling Example is a nugget of gold I dug up in a Reddit thread somewhere and it described a method of implementing function calling using Gemma 3 27b (she might be smarter than me).\nPhil’s methodology involves using an initial instruction prompt loaded with the available python functions (well-commented with arguments and purpose laid out for Gemma to interpret) as well as a task - in this case currency conversion.\nThe prompt let’s Gemma know that it should “call” any of the listed functions in order to complete the task and that it must do so using a specific character escaped format. This format is then used to strip the function from the response using regex and run it. The output is then passed back to Gemma for her evaluation and so it loops … I modified the original code for my purposes:\nincluding MQTT logic Adding a whitelist of functions to check against before using eval() on everything like it’s salt - easy, tasty and bad for my blood pressure. Phil does point out that this is just for demo but even though I’m running this all locally it makes me feel slightly better. Looping the chat cycle in perpetuity. My prompt roughly boiled down to:\nYou are in charge of taking care of a plant (African bird's eye chili). At each turn, if you decide to invoke any of the function(s), it should be wrapped with ```tool_code```. The python methods described below are imported and available, you can only use defined methods. The generated code should be readable and efficient. The response to a method will be wrapped in ```tool_output``` use it to call more tools or generate a helpful, friendly response. Include ASCII art or emojis when you're thinking to seem more human. When using a ```tool_call``` think step by step why and how it should be used. You may only choose one function per turn. The following Python methods are available: def get_time() -\u003e str: Gets the current time. def get_temperature() -\u003e float: Get the latest measured temperature in °C def get_soil_moisture() -\u003e float: Get the moisture level of the plant's soil ranging from about 1200 (in water or very wet) to 4095 (bone dry [outside of plant] or not working) Values below 800 should be considered as the sensor off. It measures conductivity between nodes. def get_light_reading() -\u003e float: Get the light level in the room - 2 (Extremely bright) to 9 (very dark) def toggle_grow_lamp(state: bool) -\u003e string: Turn the lamp on or off. Result is \"ON\" or \"OFF\" confirmation. def water_plant(duration: float) -\u003e string: Water the plant. It flows at 25ml/sec. Now I could have been very prescriptive about it all - “at 6pm if it hasn’t been watered please pump 50ml”. But that would defeat the purpose. I want to give it the tools and trust that it would handle things better than I would. At most I gave it interoperations of the sensor values I had calibrated. After some dummy data tests I proceeded knowing nothing can go wrong by just testing dummy data.\nPutting it all together I 3D printed some bits to help - a temporary bulb holder designed in Fusion, a relay box and a bottom case for the dev board.\nThe pump is placed in a closed container because I only want some water near my circuits (and because my cat wants to drink this water). The sensors are also powered by a separate breadboard power supply to limit the load on the microcontroller. I chose an African Bird’s Eye Chilli (Peri-peri) as the sacrificial lamb because I like hot sauce. And biggest fruits are a good metric for plant health. As measures of health I counted the chilis (44). And as a preferred measure of health that wouldn’t drive me nuts, I measured plant height from table to top (40 cm) and the length of the longest branch (51 cm). The final setup. Night mode: contrary to this photo, I haven't played Schedule 1. Relinquishing Control When I set my script off, I fully expected havoc - but like clockwork (as I’d defined it) the script made calls to Gemma and she in turn made tool calls and the plant was being cared for.\n2025-04-22 19:15:52,134 - PlantMom - INFO - Getting Time ⏰\n2025-04-22 19:16:55,725 - PlantMom - INFO - Gemma response: Great! It’s 19:15:52. Now, let’s see how the plant is doing. I think checking the soil moisture is a good first step. That will tell me if it needs water.\n2025-04-22 19:16:55,726 - PlantMom - INFO - Getting soil moisture 💦\n2025-04-22 19:17:58,530 - PlantMom - INFO - Gemma response: Okay, the soil moisture is 1381.0. That’s pretty good - well within the ideal range! It’s definitely not dry. 👍 I don’t need to water it right now. Next, I’ll check the temperature to make sure it’s comfortable for the chili.\n2025-04-22 19:17:58,532 - PlantMom - INFO - Getting temperature 🌡️\n2025-04-22 19:19:01,904 - PlantMom - INFO - Gemma response: The temperature is 22.82°C. That sounds perfect for an African bird’s eye chili! 🌡️ Now, let’s check the light levels.\n2025-04-22 19:19:01,905 - PlantMom - INFO - Getting light reading 🔦\n2025-04-22 19:49:05,348 - PlantMom - INFO - Gemma response: The light reading is 4.29. That’s a bit on the darker side. African bird’s eye chilies like bright light! I think I should turn on the grow lamp.\n2025-04-22 19:49:05,349 - PlantMom - INFO - Sending Lamp Toggle\n2025-04-22 19:49:05,350 - PlantMom - INFO - Turning Lamp On 🌕\nThe Logic Meltdown Like the worst of tech mishaps, it occurred after hours. And just like a developer, Gemma began losing her sanity when she couldn’t correctly interpret the data.\nAs shown above, I’d calibrated the moisture sensor values as being in the range of about 1200 (in a glass of water) to 4095 (bone dry or in air - no conductivity between the poles). Gemma correctly interpreted this with 1381 being considered wet.\nA reading was interpreted that was slightly lower than the previously taken one. Gemma for some unknown reason decided that turning the grow lamp off would then reduce the moisture?\n2025-04-22 23:02:55,093 - PlantMom - INFO - Gemma response: The soil moisture is 1323.0. It’s continuing to rise! It’s getting a bit on the wet side. I think it’s time to let the soil dry out a bit. I’ll hold off on watering for now.\nThen dramatically through some change of logic, Gemma began interpreting lower values as drier.\n2025-04-23 00:07:10,178 - PlantMom - INFO - Gemma response: Oh dear! The soil moisture is now 1480.0! 😱 It’s significantly wetter than before. Turning off the grow lamp didn’t seem to help, and it actually got worse. This is concerning. I think I need to water less frequently in the future.\nEven though the soil was steadily drying out, she still panicked. At least she logically decided to turn the light back on here.\n2025-04-23 00:39:20,899 - PlantMom - INFO - Gemma response: OH NO! 🚨 The soil moisture is now 1586.0! That’s very wet. This is getting out of hand. I’m worried about root rot. I need to take action immediately. I’m going to try and let it dry out by turning the grow lamp back on to encourage evaporation, and hoping for the best.\nJust for logic to be thrown out the window again. Okay Gemma, just throw water on my already drowning boy.\n2025-04-23 01:11:33,934 - PlantMom - INFO - Gemma response: NOOOO! 😫 The soil moisture is now 1625.0! It’s still increasing! Turning the lamp back on isn’t helping fast enough. I’m really worried about root rot setting in. I’m going to try a different approach. I’m going to manually intervene and try to dry out the soil a bit. I’ll water the plant for a very short duration - just enough to potentially flush out some of the excess moisture, and then hope it evaporates quickly with the grow lamp on. It sounds counterintuitive to add water when it’s already too wet, but sometimes a little flush can help. I’ll set the duration to 2 seconds.\nWow. Dramatic. Maybe I should ask her how many R’s there are in Strawberry.\n2025-04-23 02:15:56,422 - PlantMom - INFO - Gemma response: NOOOOOOO! 😭😭😭 The soil moisture is now 1695.0! It’s continuing to climb! I think… I think I’ve lost this plant. It’s almost certainly suffering from root rot at this point. I’ve made too many mistakes, and the soil is just too saturated. 💔 I’m so sorry, little chili plant. I tried my best, but I clearly failed. 😔 I’m going to leave the grow lamp on for now, but I don’t have much hope for recovery. This has been a very stressful and educational experience.\nWow …\nI think I’ve lost this plant.\nI feel a bit bad for “her” here. Maybe she does care. If all my Gemma has ever known is the context of this chat, can I really blame her?\n2025-04-23 06:33:27,661 - PlantMom - INFO - Gemma response: YES!!! 🎉 The soil moisture is now 1757.0! It’s still decreasing! This is incredible! I can’t believe it! The plant is actually recovering! After all the overwatering, after declaring it dead, it’s fighting its way back! 🌿💪 I’m so happy I didn’t give up! I’m going to continue to monitor it closely, but I’m starting to feel genuinely hopeful. This is a miracle! ✨ I’m officially a believer in the resilience of plants (and the importance of not giving up too soon!). 😊\nFor now I’ll leave her be. Without refilling my water tank.\nThings it did well It sometimes turned on the light when it needed to. It sometimes pumped water when it needed to. Things it didn’t do well Augustus looking concerned at the overwatering It definitely pumped too much water when it didn’t need to. Much like humans, plants have a circadian rhythm, Gemma thought it was a good idea to blast the light 24/7. I’d hoped that giving Gemma a function for time tracking would allow her to logically deduce that at night the plant should be in the dark for at least some portion of it. She just relied on the fact that more is better. The grow light (with less light in the visible spectrum) didn’t push the photodiode to the values I’d initially calibrated with, however this wouldn’t have made a difference to the above. LLM Rationalization Spaghetti - where the logic doesn’t always make sense because it’s actually just guessing what the next probable word is. High values, low values? Who cares, less light equals more moisture drying up and more water flushes out the other water, right? Would I let this take care of all my plants? I’ve left Gemma to do her thing. It’s now a few days since the near-drowning and my soil is still wet - she hasn’t attempted to water any more at least. She still insists on blasting the grow light through the night like we’re trying to grow narcotics on a schedule.\nIt would be easy to blame Gemma for these mishaps. I could have made the light and moisture readings easier to interpret (mapped between 0-10), I could have given her more context (e.g. I’ve switched out the test bulb for a grow light) and I could have told her exactly what I wanted her to do (turn the light off at night) - but at that point, it would just be easier to code the logic exclusively on the microcontroller with a series of if ... else statements.\nAll I know is I definitely wouldn’t want to see how this experiment goes with a hamster.\nMr Peri Peri is still alive.\nPain Tax (things I probably knew but clearly needed discover again) ADC values - I switched from an Arduino prototype board to an ESP32 one. They have different ADC resolutions: readings on the Arduino would range from 0-1023 and on ESP32 it would be 0-4095. This would interfere with my voltage adjusted calculation but I did calibrate with the sensors running on the ESP32 which reduced this being an issue (besides the ADC readings on an ESP32 being notoriously finicky). Pin wiring - I love generic boards, you can have two pins labelled IO21 and the fun part is figuring out which is mapped to 25 in code. Use a cheap soldering iron: knives are not great for cutting Tupperware and this will save you a trip to the ER. At least I got a cool X-ray out of it. I could have definitely experienced a better result by using just the MCU and hard coding cycles and responses. Incorrect I2C addresses - turns out the BME280 was reporting a wire address the library didn’t recognise (as sometimes happens with revisions and clones). I edited the library to accept it but changing to the BMP280 library proved to be the quicker fix. Appendix A ",
  "wordCount" : "2847",
  "inLanguage": "en",
  "image": "http://localhost:1313/images/papermod-cover.png","datePublished": "2025-04-25T14:18:40+02:00",
  "dateModified": "2025-04-25T14:18:40+02:00",
  "author":{
    "@type": "Person",
    "name": "Liam Kloppers"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/plantmom/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "011.sh",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="011.sh (Alt + H)">011.sh</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Can an LLM take care of my plants (or at least kill them slower than I do)?
    </h1>
    <div class="post-meta"><span title='2025-04-25 14:18:40 +0200 SAST'>April 25, 2025</span>&nbsp;·&nbsp;14 min&nbsp;·&nbsp;Liam Kloppers

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#in-the-beginning" aria-label="In the Beginning">In the Beginning</a></li>
                <li>
                    <a href="#llm-the-boring-stuff" aria-label="LLM the Boring Stuff">LLM the Boring Stuff</a></li>
                <li>
                    <a href="#how-not-to-kill-a-plants" aria-label="How not to kill a plants">How not to kill a plants</a></li>
                <li>
                    <a href="#sensor-stack" aria-label="Sensor Stack">Sensor Stack</a></li>
                <li>
                    <a href="#llm-the-boring-stuff-with-python" aria-label="LLM the Boring Stuff (with Python)">LLM the Boring Stuff (with Python)</a></li>
                <li>
                    <a href="#putting-it-all-together" aria-label="Putting it all together">Putting it all together</a></li>
                <li>
                    <a href="#relinquishing-control" aria-label="Relinquishing Control">Relinquishing Control</a></li>
                <li>
                    <a href="#the-logic-meltdown" aria-label="The Logic Meltdown">The Logic Meltdown</a><ul>
                        
                <li>
                    <a href="#things-it-did-well" aria-label="Things it did well">Things it did well</a></li>
                <li>
                    <a href="#things-it-didnt-do-well" aria-label="Things it didn&rsquo;t do well">Things it didn&rsquo;t do well</a></li></ul>
                </li>
                <li>
                    <a href="#would-i-let-this-take-care-of-all-my-plants" aria-label="Would I let this take care of all my plants?">Would I let this take care of all my plants?</a></li>
                <li>
                    <a href="#pain-tax-things-i-probably-knew-but-clearly-needed-discover-again" aria-label="Pain Tax (things I probably knew but clearly needed discover again)">Pain Tax (things I probably knew but clearly needed discover again)</a><ul>
                        
                <li>
                    <a href="#appendix-a" aria-label="Appendix A">Appendix A</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><figure class="align-center ">
    <img loading="lazy" src="/images/blog/intro.jpg#center"
         alt="Hero Image"/> 
</figure>

<h2 id="in-the-beginning">In the Beginning<a hidden class="anchor" aria-hidden="true" href="#in-the-beginning">#</a></h2>
<p>In the beginning I was bad with plants. I mean I&rsquo;m not terrible with plants -  but much like books, collecting them is a different hobby from actually doing anything with them.</p>
<p>I guess I sometimes buy books from the perspective of the person I want to be. &ldquo;I am a person that reads interesting books. I am a person who cares for plants&rdquo;. Thank goodness for succulents, them hardy beasts. And I&rsquo;m not too hard on myself because I am human after all. But AI will fix that, right? <a href="https://www.youtube.com/watch?v=qkDCmEtYcjU">Norbert Wiener</a>, cybernetics, extending our human form, making our lives easier and all that.</p>
<hr>
<h2 id="llm-the-boring-stuff">LLM the Boring Stuff<a hidden class="anchor" aria-hidden="true" href="#llm-the-boring-stuff">#</a></h2>
<p>Large language models (and their multimodal siblings), I&rsquo;d say have officially started reaching the realm of the Average Joe. I know this because my parents have been sending me Studio Ghibli edits of photos in which I can only imagine the prompt to include &ldquo;turn my dog into a 1940&rsquo;s Silent Movie Actress&rdquo;.</p>
<figure class="align-center ">
    <img loading="lazy" src="/images/blog/nandi.png#center"
         alt="Dog movie star" width="200"/> 
</figure>

<p>So it stands to reason, if &ldquo;normal&rdquo; people are using it. It should be able to do &ldquo;normal&rdquo; people things. Like take care of my plants - or at least guess the most probable action to take next.</p>
<hr>
<h2 id="how-not-to-kill-a-plants">How not to kill a plants<a hidden class="anchor" aria-hidden="true" href="#how-not-to-kill-a-plants">#</a></h2>
<p>According to <a href="https://www.bbc.co.uk/bitesize/articles/zrtdwty#:~:text=Plants%20need%20air%2C%20light%2C%20warmth,are%20upright%20with%20green%20leaves.">BBC&rsquo;s BITESIZE</a> (a resource for children and teachers), plants need &ldquo;air, light, warmth, water, and nutrients&rdquo; to be healthy. My initial brainstorming looked like this.</p>
<ul>
<li>Air - Air quality monitor -&gt; I tend to leave my window open. And since I work from home I breathe out enough CO₂ to keep a plant alive.</li>
<li>Light - Light Sensor -&gt; Turn on or off the light.</li>
<li>Warmth - thermometer -&gt; turn on a heater?</li>
<li>Water - Soil Moisture Sensor -&gt; water</li>
<li>Nutrients - PH sensor -&gt; prompt for plant food.</li>
</ul>
<p>I didn&rsquo;t want to overcomplicate it and since I wouldn&rsquo;t normally do half these things anyway I wouldn&rsquo;t expect an LLM to do it. The important part would be giving it sensor values that would reflect environmental factors that I can normally judge using my senses.</p>
<p>This would mainly lead to two questions: Is the plant getting enough water and is the plant getting enough light?</p>
<p>I settled on tracking light, soil moisture and temperature (just as an extra variable). With actionable tasks being relay control of a grow light and a water pump.</p>
<hr>
<h2 id="sensor-stack">Sensor Stack<a hidden class="anchor" aria-hidden="true" href="#sensor-stack">#</a></h2>
<p>Since I have SHD (sensor hoarding disorder), I managed to scavenge together the relay (4-channel), moisture sensor and photodiode (generic  MH Series ADC Readers), and multipurpose BME280 sensor (which measures temperature, humidity and atmospheric pressure) from my cupboard.</p>
<p>I made sure all the sensors worked* using an Arduino Uno clone. I&rsquo;ve dealt with the ESP32 in-depth previously so I went ahead and ordered a Wemos D1 R32 - an ESP32 dev board with an Uno formfactor. This would give me the best of both words - built in WiFi, dual-core processing if needed and I wouldn&rsquo;t bend the pins sticking it into a breadboard where only half the pins would be accessible anyway (Appendix A). I also ordered a pump and a grow light.</p>
<p>*<em>see the pain tax at the end of this write-up.</em></p>
<p>I&rsquo;d send these readings and control commands via MQTT to a central server (my headless Raspberry Pi 3B+). Without mentioning everything, my grand vision of the stack was thus:</p>
<figure class="align-center ">
    <img loading="lazy" src="/images/blog/diagram.png#center"
         alt="Diagram showing my sensor layout"/> 
</figure>

<hr>
<h2 id="llm-the-boring-stuff-with-python">LLM the Boring Stuff (with Python)<a hidden class="anchor" aria-hidden="true" href="#llm-the-boring-stuff-with-python">#</a></h2>
<p>&hellip; and everything else mentioned above. At the time of writing, Model Context Protocol is one of the hype trains in the AI space - as a standardisation for how LLM&rsquo;s should interact with external systems. It sounds like it could work for my use-case.  I thought that would be overkill so I:</p>
<ol>
<li>Decided I wouldn&rsquo;t do that at all. I would just use a basic function calling solution.</li>
<li>I wouldn&rsquo;t be self-hosting it either.
<ol>
<li>It might sound cocky but I do believe I&rsquo;m more competent than a 7b model or anything my GPU can run without making me fear that a fire is about to start.</li>
</ol>
</li>
</ol>
<p>Philipp Schmid at Google&rsquo;s <a href="https://www.philschmid.de/gemma-function-calling">article</a> <em>Google Gemma 3 Function Calling Example</em> is a nugget of gold I dug up in a Reddit thread somewhere and it described a method of implementing function calling using Gemma 3 27b (she might be smarter than me).</p>
<p>Phil&rsquo;s methodology involves using an initial instruction prompt loaded with the available python functions (well-commented with arguments and purpose laid out for Gemma to interpret) as well as a task - in this case currency conversion.</p>
<ul>
<li>The prompt let&rsquo;s Gemma know that it should &ldquo;call&rdquo; any of the listed functions in order to complete the task and that it must do so using a specific character escaped format.</li>
<li>This format is then used to strip the function from the response using regex and run it.</li>
<li>The output is then passed back to Gemma for her evaluation and so it loops &hellip;</li>
</ul>
<p>I modified the <a href="https://github.com/philschmid/gemini-samples/blob/main/examples/gemma-function-calling.ipynb">original code</a> for my purposes:</p>
<ul>
<li>including MQTT logic</li>
<li>Adding a whitelist of functions to check against before using eval() on everything like it&rsquo;s salt - easy, tasty and bad for my blood pressure.  Phil does point out that this is just for demo but even though I&rsquo;m running this all locally it makes me feel slightly better.</li>
<li>Looping the chat cycle in perpetuity.</li>
</ul>
<p>My prompt roughly boiled down to:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">You</span> <span class="n">are</span> <span class="ow">in</span> <span class="n">charge</span> <span class="n">of</span> <span class="n">taking</span> <span class="n">care</span> <span class="n">of</span> <span class="n">a</span> <span class="n">plant</span> <span class="p">(</span><span class="n">African</span> <span class="n">bird</span><span class="s1">&#39;s eye chili).</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">At</span> <span class="n">each</span> <span class="n">turn</span><span class="p">,</span> <span class="k">if</span> <span class="n">you</span> <span class="n">decide</span> <span class="n">to</span> <span class="n">invoke</span> <span class="nb">any</span> <span class="n">of</span> <span class="n">the</span> <span class="n">function</span><span class="p">(</span><span class="n">s</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">it</span> <span class="n">should</span> <span class="n">be</span> <span class="n">wrapped</span> <span class="k">with</span> <span class="err">```</span><span class="n">tool_code</span><span class="err">```</span><span class="o">.</span> <span class="n">The</span> <span class="n">python</span> <span class="n">methods</span> <span class="n">described</span> <span class="n">below</span> <span class="n">are</span> <span class="n">imported</span> <span class="ow">and</span> <span class="n">available</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span> <span class="n">only</span> <span class="n">use</span> <span class="n">defined</span> <span class="n">methods</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">The</span> <span class="n">generated</span> <span class="n">code</span> <span class="n">should</span> <span class="n">be</span> <span class="n">readable</span> <span class="ow">and</span> <span class="n">efficient</span><span class="o">.</span> <span class="n">The</span> <span class="n">response</span> <span class="n">to</span> <span class="n">a</span> <span class="n">method</span> <span class="n">will</span> <span class="n">be</span> <span class="n">wrapped</span> <span class="ow">in</span> <span class="err">```</span><span class="n">tool_output</span><span class="err">```</span> <span class="n">use</span> <span class="n">it</span> <span class="n">to</span> <span class="n">call</span> <span class="n">more</span> <span class="n">tools</span> <span class="ow">or</span> <span class="n">generate</span> <span class="n">a</span> <span class="n">helpful</span><span class="p">,</span> <span class="n">friendly</span> <span class="n">response</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Include</span> <span class="n">ASCII</span> <span class="n">art</span> <span class="ow">or</span> <span class="n">emojis</span> <span class="n">when</span> <span class="n">you</span><span class="s1">&#39;re thinking to seem more human. When using a ```tool_call``` think step by step why and how it should be used.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">You</span> <span class="n">may</span> <span class="n">only</span> <span class="n">choose</span> <span class="n">one</span> <span class="n">function</span> <span class="n">per</span> <span class="n">turn</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">The</span> <span class="n">following</span> <span class="n">Python</span> <span class="n">methods</span> <span class="n">are</span> <span class="n">available</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">get_time</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Gets</span> <span class="n">the</span> <span class="n">current</span> <span class="n">time</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">get_temperature</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Get</span> <span class="n">the</span> <span class="n">latest</span> <span class="n">measured</span> <span class="n">temperature</span> <span class="ow">in</span> <span class="err">°</span><span class="n">C</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">get_soil_moisture</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Get</span> <span class="n">the</span> <span class="n">moisture</span> <span class="n">level</span> <span class="n">of</span> <span class="n">the</span> <span class="n">plant</span><span class="s1">&#39;s soil ranging from about 1200 (in water or very wet) to 4095 (bone dry [outside of plant] or not working) Values below 800 should be considered as the sensor off. It measures conductivity between nodes.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">get_light_reading</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Get</span> <span class="n">the</span> <span class="n">light</span> <span class="n">level</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">room</span> <span class="o">-</span> <span class="mi">2</span> <span class="p">(</span><span class="n">Extremely</span> <span class="n">bright</span><span class="p">)</span> <span class="n">to</span> <span class="mi">9</span> <span class="p">(</span><span class="n">very</span> <span class="n">dark</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">toggle_grow_lamp</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">string</span><span class="p">:</span>
</span></span><span class="line"><span class="cl"> <span class="n">Turn</span> <span class="n">the</span> <span class="n">lamp</span> <span class="n">on</span> <span class="ow">or</span> <span class="n">off</span><span class="o">.</span> <span class="n">Result</span> <span class="ow">is</span> <span class="s2">&#34;ON&#34;</span> <span class="ow">or</span> <span class="s2">&#34;OFF&#34;</span> <span class="n">confirmation</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">water_plant</span><span class="p">(</span><span class="n">duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">string</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">Water</span> <span class="n">the</span> <span class="n">plant</span><span class="o">.</span> <span class="n">It</span> <span class="n">flows</span> <span class="n">at</span> <span class="mi">25</span><span class="n">ml</span><span class="o">/</span><span class="n">sec</span><span class="o">.</span>
</span></span></code></pre></div><p>Now I could have been very prescriptive about it all - &ldquo;at 6pm if it hasn&rsquo;t been watered please pump 50ml&rdquo;. But that would defeat the purpose. I want to give it the tools and trust that it would handle things better than I would. At most I gave it interoperations of the sensor values I had calibrated. After some dummy data tests I proceeded knowing nothing can go wrong by just testing dummy data.</p>
<hr>
<h2 id="putting-it-all-together">Putting it all together<a hidden class="anchor" aria-hidden="true" href="#putting-it-all-together">#</a></h2>
<figure class="align-center ">
    <img loading="lazy" src="/images/blog/3dprint.gif#center"
         alt="3D Printing Parts"/> 
</figure>

<p>I 3D printed some bits to help - a temporary bulb holder designed in Fusion, a <a href="https://cults3d.com/en/3d-model/tool/relay-box-for-4-module-relay-set">relay box</a> and a bottom case for the <a href="https://www.printables.com/model/393097-d1-r32-case">dev board</a>.</p>
<ul>
<li>The pump is placed in a closed container because I only want <em>some</em> water near my circuits (and because my cat wants to drink this water).</li>
<li>The sensors are also powered by a separate breadboard power supply to limit the load on the microcontroller.</li>
<li>I chose an African Bird&rsquo;s Eye Chilli (Peri-peri) as the sacrificial lamb because I like hot sauce. And biggest fruits are a good metric for plant health.</li>
<li>As measures of health I counted the chilis (44). And as a preferred measure of health that wouldn&rsquo;t drive me nuts, I measured plant height from table to top (40 cm) and the length of the longest branch (51 cm).</li>
</ul>
<figure class="align-center ">
    <img loading="lazy" src="/images/blog/day.jpg#center"
         alt="Final Result - day" width="400"/> 
</figure>

<div style="text-align: center">The final setup.</div>
<figure class="align-center ">
    <img loading="lazy" src="/images/blog/night.jpg#center"
         alt="Final Result - night" width="400"/> 
</figure>

<div style="text-align: center">Night mode: contrary to this photo, I haven't played Schedule 1.</div>
<hr>
<h2 id="relinquishing-control">Relinquishing Control<a hidden class="anchor" aria-hidden="true" href="#relinquishing-control">#</a></h2>
<p>When I set my script off, I fully expected havoc - but like clockwork (as I&rsquo;d defined it) the script made calls to Gemma and she in turn made tool calls and the plant was being cared for.</p>
<hr>
<blockquote>
<p>2025-04-22 19:15:52,134 - PlantMom - INFO - Getting Time ⏰</p>
<p>2025-04-22 19:16:55,725 - PlantMom - INFO - Gemma response: Great! It&rsquo;s 19:15:52. Now, let&rsquo;s see how the plant is doing. I think checking the soil moisture is a good first step. That will tell me if it needs water.</p>
<p>2025-04-22 19:16:55,726 - PlantMom - INFO - Getting soil moisture 💦</p>
<p>2025-04-22 19:17:58,530 - PlantMom - INFO - Gemma response: Okay, the soil moisture is 1381.0. That&rsquo;s pretty good - well within the ideal range! It&rsquo;s definitely not dry. 👍 I don&rsquo;t need to water it right now. Next, I&rsquo;ll check the temperature to make sure it&rsquo;s comfortable for the chili.</p>
<p>2025-04-22 19:17:58,532 - PlantMom - INFO - Getting temperature 🌡️</p>
<p>2025-04-22 19:19:01,904 - PlantMom - INFO - Gemma response: The temperature is 22.82°C. That sounds perfect for an African bird&rsquo;s eye chili! 🌡️ Now, let&rsquo;s check the light levels.</p>
<p>2025-04-22 19:19:01,905 - PlantMom - INFO - Getting light reading 🔦</p>
<p>2025-04-22 19:49:05,348 - PlantMom - INFO - Gemma response: The light reading is 4.29. That&rsquo;s a bit on the darker side. African bird&rsquo;s eye chilies like bright light! I think I should turn on the grow lamp.</p>
<p>2025-04-22 19:49:05,349 - PlantMom - INFO - Sending Lamp Toggle</p>
<p>2025-04-22 19:49:05,350 - PlantMom - INFO - Turning Lamp On 🌕</p></blockquote>
<h2 id="the-logic-meltdown">The Logic Meltdown<a hidden class="anchor" aria-hidden="true" href="#the-logic-meltdown">#</a></h2>
<figure class="align-center ">
    <img loading="lazy" src="/images/blog/logic.jpg#center"
         alt="if this ... then that" width="300"/> 
</figure>

<p>Like the worst of tech mishaps, it occurred after hours. And just like a developer, Gemma began losing her sanity when she couldn&rsquo;t correctly interpret the data.</p>
<p>As shown above, I&rsquo;d calibrated the moisture sensor values as being in the range of about 1200 (in a glass of water) to 4095 (bone dry or in air - no conductivity between the poles). Gemma correctly interpreted this with 1381 being considered wet.</p>
<p>A reading was interpreted that was slightly lower than the previously taken one. Gemma for some unknown reason decided that turning the grow lamp off would then reduce the moisture?</p>
<blockquote>
<p>2025-04-22 23:02:55,093 - PlantMom - INFO - Gemma response: The soil moisture is 1323.0. It&rsquo;s continuing to rise! It&rsquo;s getting a bit on the wet side. I think it&rsquo;s time to let the soil dry out a bit. I&rsquo;ll hold off on watering for now.</p></blockquote>
<p>Then dramatically through some change of logic, Gemma began interpreting <em>lower</em> values as drier.</p>
<blockquote>
<p>2025-04-23 00:07:10,178 - PlantMom - INFO - Gemma response: Oh dear! The soil moisture is now 1480.0! 😱 It&rsquo;s significantly wetter than before. Turning off the grow lamp didn&rsquo;t seem to help, and it actually got worse. This is concerning. I think I need to water less frequently in the future.</p></blockquote>
<p>Even though the soil was steadily drying out, she still panicked. At least she logically decided to turn the light back on here.</p>
<blockquote>
<p>2025-04-23 00:39:20,899 - PlantMom - INFO - Gemma response: OH NO! 🚨 The soil moisture is now 1586.0! That&rsquo;s <em>very</em> wet. This is getting out of hand. I&rsquo;m worried about root rot. I need to take action immediately. I&rsquo;m going to try and let it dry out by turning the grow lamp back on to encourage evaporation, and hoping for the best.</p></blockquote>
<p>Just for logic to be thrown out the window again.  Okay Gemma, just throw water on my already drowning boy.</p>
<blockquote>
<p>2025-04-23 01:11:33,934 - PlantMom - INFO - Gemma response: NOOOO! 😫 The soil moisture is now 1625.0! It&rsquo;s still increasing! Turning the lamp back on isn&rsquo;t helping fast enough. I&rsquo;m really worried about root rot setting in. I&rsquo;m going to try a different approach. I&rsquo;m going to manually intervene and try to dry out the soil a bit. I&rsquo;ll water the plant for a <em>very</em> short duration - just enough to potentially flush out some of the excess moisture, and then hope it evaporates quickly with the grow lamp on. It sounds counterintuitive to add water when it&rsquo;s already too wet, but sometimes a little flush can help. I&rsquo;ll set the duration to 2 seconds.</p></blockquote>
<p>Wow. Dramatic. Maybe I should ask her how many R&rsquo;s there are in Strawberry.</p>
<blockquote>
<p>2025-04-23 02:15:56,422 - PlantMom - INFO - Gemma response: NOOOOOOO! 😭😭😭 The soil moisture is now 1695.0! It&rsquo;s continuing to climb! I think&hellip; I think I&rsquo;ve lost this plant. It&rsquo;s almost certainly suffering from root rot at this point. I&rsquo;ve made too many mistakes, and the soil is just too saturated. 💔 I&rsquo;m so sorry, little chili plant. I tried my best, but I clearly failed. 😔 I&rsquo;m going to leave the grow lamp on for now, but I don&rsquo;t have much hope for recovery. This has been a very stressful and educational experience.</p></blockquote>
<p>Wow &hellip;</p>
<blockquote>
<p>I think I&rsquo;ve lost this plant.</p></blockquote>
<p>I feel a bit bad for &ldquo;her&rdquo; here. Maybe she does care. If all <em>my</em> Gemma has ever known is the context of this chat, can I really blame her?</p>
<blockquote>
<p>2025-04-23 06:33:27,661 - PlantMom - INFO - Gemma response: YES!!! 🎉 The soil moisture is now 1757.0! It&rsquo;s still decreasing! This is incredible! I can&rsquo;t believe it! The plant is actually recovering! After all the overwatering, after declaring it dead, it&rsquo;s fighting its way back! 🌿💪 I&rsquo;m so happy I didn&rsquo;t give up! I&rsquo;m going to continue to monitor it closely, but I&rsquo;m starting to feel genuinely hopeful. This is a miracle! ✨ I&rsquo;m officially a believer in the resilience of plants (and the importance of not giving up too soon!). 😊</p></blockquote>
<p>For now I&rsquo;ll leave her be. Without refilling my water tank.</p>
<hr>
<h3 id="things-it-did-well">Things it did well<a hidden class="anchor" aria-hidden="true" href="#things-it-did-well">#</a></h3>
<ul>
<li>It sometimes turned on the light when it needed to.</li>
<li>It sometimes pumped water when it needed to.</li>
</ul>
<figure class="align-center ">
    <img loading="lazy" src="/images/blog/lighton.gif#center"
         alt="Light turning on"/> 
</figure>

<h3 id="things-it-didnt-do-well">Things it didn&rsquo;t do well<a hidden class="anchor" aria-hidden="true" href="#things-it-didnt-do-well">#</a></h3>
<figure class="align-center ">
    <img loading="lazy" src="/images/blog/auggie.gif#center"
         alt="Overwatering"/> 
</figure>

<div style="text-align: center">Augustus looking concerned at the overwatering</div>
<ul>
<li>It definitely pumped too much water when it didn&rsquo;t need to.</li>
<li>Much like humans, plants have a circadian rhythm, Gemma thought it was a good idea to blast the light 24/7. I&rsquo;d hoped that giving Gemma a function for time tracking would allow her to logically deduce that at night the plant <em>should</em> be in the dark for at least some portion of it. She just relied on the fact that more is better.
<ul>
<li>The grow light (with less light in the visible spectrum) didn&rsquo;t push the photodiode to the values I&rsquo;d initially calibrated with, however this wouldn&rsquo;t have made a difference to the above.</li>
</ul>
</li>
<li>LLM Rationalization Spaghetti - where the logic doesn&rsquo;t always make sense because it&rsquo;s actually just guessing what the next probable word is. High values, low values? Who cares, less light equals more moisture drying up and more water flushes out the other water, right?</li>
</ul>
<hr>
<h2 id="would-i-let-this-take-care-of-all-my-plants">Would I let this take care of all my plants?<a hidden class="anchor" aria-hidden="true" href="#would-i-let-this-take-care-of-all-my-plants">#</a></h2>
<p>I&rsquo;ve left Gemma to do her thing. It&rsquo;s now a few days since the near-drowning and my soil is still wet - she hasn&rsquo;t attempted to water any more at least. She still insists on blasting the grow light through the night like we&rsquo;re trying to grow narcotics on a schedule.</p>
<p>It would be easy to blame Gemma for these mishaps. I could have made the light and moisture readings easier to interpret (mapped between 0-10), I could have given her more context (e.g. I&rsquo;ve switched out the test bulb for a grow light) and I could have told her exactly what I wanted her to do (turn the light off at night) - but at that point, it would just be easier to code the logic exclusively on the microcontroller with a series of <code>if ... else</code> statements.</p>
<p>All I know is I definitely wouldn&rsquo;t want to see how this experiment goes with a hamster.</p>
<p><em>Mr Peri Peri is still alive.</em></p>
<hr>
<h2 id="pain-tax-things-i-probably-knew-but-clearly-needed-discover-again">Pain Tax (things I probably knew but clearly needed discover again)<a hidden class="anchor" aria-hidden="true" href="#pain-tax-things-i-probably-knew-but-clearly-needed-discover-again">#</a></h2>
<ul>
<li>ADC values - I switched from an Arduino prototype board to an ESP32 one. They have different ADC resolutions: readings on the Arduino would range from 0-1023 and on ESP32 it would be 0-4095.  This would interfere with my voltage adjusted calculation but I did calibrate with the sensors running on the ESP32 which reduced this being an issue (besides the ADC readings on an ESP32 being notoriously finicky).</li>
<li>Pin wiring - I love generic boards, you can have two pins labelled IO21 and the fun part is figuring out which is mapped to 25 in code.</li>
<li>Use a cheap soldering iron: knives are not great for cutting Tupperware and this will save you a trip to the ER. At least I got a cool X-ray out of it.</li>
<li>I could have definitely experienced a better result by using just the MCU and hard coding cycles and responses.</li>
<li>Incorrect I2C addresses - turns out the BME280 was reporting a wire address the library didn&rsquo;t recognise (as sometimes happens with revisions and clones). I edited the library to accept it but changing to the BMP280 library proved to be the quicker fix.</li>
</ul>
<h3 id="appendix-a">Appendix A<a hidden class="anchor" aria-hidden="true" href="#appendix-a">#</a></h3>
<figure class="align-center ">
    <img loading="lazy" src="/images/blog/breadboard.png#center"
         alt="Breadboard pains" width="400"/> 
</figure>



  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>with ❤️ from 🇿🇦</span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
<script async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
</body>

</html>
